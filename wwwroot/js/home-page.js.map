{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/scripts/components/_modalForm.ts","webpack:///./src/scripts/components/_tableRow.ts","webpack:///./src/scripts/constants/_serverData.ts","webpack:///./src/scripts/pages/home-page.ts","webpack:///./src/scripts/service/_fileService.ts","webpack:///./src/scripts/utilities/_LocalData.ts","webpack:///./src/scripts/utilities/_helper.ts","webpack:///./src/styles/pages/home-page.scss?6ef4"],"names":["Object","defineProperty","exports","value","renderForm","item","html","name","default","tableRow","data","container","console","error","length","map","file","id","extension","undefined","modifiedAt","modifiedBy","innerHTML","serverData","type","createdAt","Date","createdBy","subFiles","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","push","__importDefault","mod","__esModule","jquery_1","require","_helper_1","_fileService_1","_tableRow_1","_modalForm_1","point","document","querySelector","contextMenu","getElementById","fileService","keyStop","end","bind","event","selector","which","target","is","preventDefault","getData","Data","addContextMenu","on","handleModalShow","window","addEventListener","showContextMenu","show","style","display","btnElement","relatedTarget","btn","task","currentId","getDoc","success","modal","find","text","errorList","_a","name_1","val","toString","append","lastIndexOf","substr","handleCreate","catch","handleEdit","handleDelete","docs","querySelectorAll","forEach","doc","contextMenuListener","el","top","left","x","getAttribute","contextMenuHeader","innerText","subFolderbtn","subFilebtn","btnEdit","btnDelete","setAttribute","isFolder","classList","remove","newFile","parentId","errorMessage","_b","createNewFile","fileName","editFileName","removeItem","__assign","assign","s","i","arguments","p","prototype","hasOwnProperty","_serverData_1","_LocalData_1","FileService","_this","jsonData","get","getDataFromServer","obj","save","hasAlreadyExisted","fileToAdd","now","errorMessgae","err","folder","filter","localStorage","getItem","JSON","parse","setItem","stringify","log","ready","fn","readyState"],"mappings":"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","file":"js/home-page.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"home-page\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors~home-page\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction renderForm(item) {\r\n    var html = \"\\n    <form>\\n      <div class=\\\"form-group\\\">\\n        <input type=\\\"text\\\" \\n            class=\\\"form-control\\\" \\n            id=\\\"file-name\\\"\\n            placeholder=\\\"T\\u00EAn file\\\"\\n            name=\\\"file-name\\\"\\n            value=\\\"\" + (item ? item.name : '') + \"\\\"\\n        />\\n      </div>\\n      <div class=\\\"container\\\">\\n        <ul id=\\\"error-messages\\\"></ul>\\n      </div>\\n    </form>\\n    \";\r\n    return html;\r\n}\r\nexports.default = renderForm;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tableRow = function (data, container) {\r\n    if (!container) {\r\n        console.error('Cannot find conatiner');\r\n        return;\r\n    }\r\n    var html = '';\r\n    if ((data === null || data === void 0 ? void 0 : data.length) !== 0) {\r\n        data.map(function (file) {\r\n            html += \"<tr data-id=\\\"\" + file.id + \"\\\">\\n            <td data-label=\\\"File Type\\\" scope=\\\"row\\\">\\n            <span><i class=\\\"fas \" + (file.extension !== undefined\r\n                ? 'fa-file-excel icon-excel'\r\n                : 'fa-folder') + \"\\\"></i></span>\\n            </td>\\n            <td data-label=\\\"Name\\\"><span>\" + file.name + \"</span></td>\\n            <td data-label=\\\"Modified\\\"><span>\" + file.modifiedAt + \"</span></td>\\n            <td data-label=\\\"Modified By\\\"><span>\" + file.modifiedBy + \"</span></td>\\n            <td></td>\\n        </tr>\";\r\n        });\r\n        container.innerHTML = html;\r\n    }\r\n    else {\r\n        container.innerHTML = 'Không có dữ liệu nào';\r\n    }\r\n};\r\nexports.default = tableRow;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar serverData = [\r\n    {\r\n        id: '1',\r\n        name: 'CAS',\r\n        type: 'folder',\r\n        createdAt: new Date(),\r\n        createdBy: 'main',\r\n        modifiedAt: new Date(),\r\n        modifiedBy: 'Megan Bowen',\r\n        subFiles: [],\r\n    },\r\n    {\r\n        id: '2',\r\n        name: 'CoasterAndBargeLoading.xlsx',\r\n        type: 'file',\r\n        extension: 'xlsx',\r\n        createdAt: new Date(),\r\n        createdBy: 'main',\r\n        modifiedAt: new Date(),\r\n        modifiedBy: 'Administrator MOD',\r\n    },\r\n    {\r\n        id: '3',\r\n        name: 'RevenueByService.xlsx',\r\n        type: 'file',\r\n        extension: 'xlsx',\r\n        createdAt: new Date(),\r\n        createdBy: 'main',\r\n        modifiedAt: new Date(),\r\n        modifiedBy: 'Administrator MOD',\r\n    },\r\n    {\r\n        id: '4',\r\n        name: 'RevenueByService2016.xlsx',\r\n        type: 'file',\r\n        extension: 'xlsx',\r\n        createdAt: new Date(),\r\n        createdBy: 'main',\r\n        modifiedAt: new Date(),\r\n        modifiedBy: 'Administrator MOD',\r\n    },\r\n    {\r\n        id: '5',\r\n        name: 'RevenueByService2017.xlsx',\r\n        type: 'file',\r\n        extension: 'xlsx',\r\n        createdAt: new Date(),\r\n        createdBy: 'main',\r\n        modifiedAt: new Date(),\r\n        modifiedBy: 'Administrator MOD',\r\n    },\r\n];\r\nexports.default = serverData;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar jquery_1 = __importDefault(require(\"jquery\"));\r\nvar _helper_1 = __importDefault(require(\"../utilities/_helper\"));\r\nvar _fileService_1 = __importDefault(require(\"../service/_fileService\"));\r\nvar _tableRow_1 = __importDefault(require(\"../components/_tableRow\"));\r\nvar _modalForm_1 = __importDefault(require(\"../components/_modalForm\"));\r\nrequire('bootstrap/js/dist/util');\r\nrequire('bootstrap/js/dist/button');\r\nrequire('bootstrap/js/dist/collapse');\r\nrequire('bootstrap/js/dist/modal');\r\nvar point = document.querySelector('#doc-list tbody');\r\nvar contextMenu = document.getElementById('context-menu');\r\nvar fileService;\r\n_helper_1.default(function () {\r\n    // prevent enter and backspace\r\n    jquery_1.default(function () {\r\n        var keyStop = {\r\n            8: ':not(input:text, textarea, input:file, input:password)',\r\n            13: 'input:text, input:password',\r\n            end: null,\r\n        };\r\n        jquery_1.default(document).bind('keydown', function (event) {\r\n            var selector = keyStop[event.which];\r\n            if (selector !== undefined && jquery_1.default(event.target).is(selector)) {\r\n                event.preventDefault(); // stop event\r\n            }\r\n            return true;\r\n        });\r\n    });\r\n    fileService = new _fileService_1.default();\r\n    fileService.getData();\r\n    _tableRow_1.default(fileService.Data(), point);\r\n    addContextMenu();\r\n    // Modal to handle create and edit\r\n    jquery_1.default('#file-modal').on('show.bs.modal', function (event) {\r\n        return handleModalShow(event);\r\n    });\r\n    window.addEventListener('click', function () {\r\n        showContextMenu(false);\r\n    });\r\n});\r\nfunction showContextMenu(show) {\r\n    if (show === void 0) { show = true; }\r\n    if (contextMenu)\r\n        contextMenu.style.display = show ? 'block' : 'none';\r\n}\r\n/**\r\n * Hàm phụ trách về modal\r\n */\r\nfunction handleModalShow(event) {\r\n    var btnElement = event.relatedTarget;\r\n    if (!btnElement) {\r\n        console.error('Không tìm thấy button');\r\n        return;\r\n    }\r\n    var btn = jquery_1.default(btnElement);\r\n    var task = btn.data('task');\r\n    var type = btn.data('file');\r\n    var currentId = btn.data('id');\r\n    var item;\r\n    if (currentId) {\r\n        var result = fileService.getDoc(currentId);\r\n        if (result.success && result.data)\r\n            item = result.data;\r\n    }\r\n    var modal = jquery_1.default(event.target);\r\n    modal\r\n        .find('.modal-title')\r\n        .text(task + \" \" + type + \" \" + (currentId === '' ? currentId : ''));\r\n    // render form body\r\n    if (task !== 'delete')\r\n        modal.find('.modal-body').html(_modalForm_1.default(item));\r\n    else\r\n        modal\r\n            .find('.modal-body')\r\n            .html(\"<p>Are you sure you want to delete item Id=\" + currentId + \"</p>\");\r\n    modal.find('.modal-footer').html(\"<button type=\\\"submit\\\"\\n  class=\\\"btn btn-primary\\\" id=\\\"btnSubmitForm\\\">\" + task + \"</button>\");\r\n    var errorList = modal.find('#error-messages');\r\n    jquery_1.default('#btnSubmitForm').on('click', function (event) {\r\n        var _a;\r\n        event.preventDefault();\r\n        if (task === 'create' || task === 'edit') {\r\n            // Data validation\r\n            var name_1 = (_a = modal\r\n                .find('input#file-name')\r\n                .val()) === null || _a === void 0 ? void 0 : _a.toString();\r\n            if (name_1 === undefined || name_1 === '') {\r\n                errorList.append('<li class=\"text-danger\">Vui lòng điền tên file.</li>');\r\n                return;\r\n            }\r\n            // get file extension\r\n            var extension = void 0;\r\n            if (type === 'file') {\r\n                if (name_1.lastIndexOf('.') !== -1) {\r\n                    extension = name_1\r\n                        .toString()\r\n                        .substr(name_1.lastIndexOf('.') + 1);\r\n                    if (!extension) {\r\n                        // handle error\r\n                        errorList.append('<li class=\"text-danger\">Tên file phải có extension.</li>');\r\n                        return;\r\n                    }\r\n                }\r\n                else if (!extension) {\r\n                    // handle error\r\n                    errorList.append('<li class=\"text-danger\">Tên file phải có extension.</li>');\r\n                    return;\r\n                }\r\n            }\r\n            if (task === 'create') {\r\n                handleCreate({\r\n                    name: name_1,\r\n                    type: type,\r\n                    extension: extension,\r\n                }, currentId)\r\n                    .then(function (result) {\r\n                    if (result) {\r\n                        // Do something\r\n                    }\r\n                })\r\n                    .catch(function (error) {\r\n                    errorList.append(\"<li class=\\\"text-danger\\\">\" + error + \"</li>\");\r\n                });\r\n            }\r\n            else if (task === 'edit' && currentId) {\r\n                handleEdit(currentId, name_1);\r\n            }\r\n        }\r\n        else if (task === 'delete' && currentId) {\r\n            handleDelete(currentId);\r\n        }\r\n        // hide modal\r\n        modal.modal('hide');\r\n        // rerender doc list\r\n        _tableRow_1.default(fileService.Data(), point);\r\n        addContextMenu();\r\n    });\r\n}\r\nfunction addContextMenu() {\r\n    if (contextMenu) {\r\n        var docs = document.querySelectorAll('#doc-list tbody tr');\r\n        if (docs) {\r\n            docs.forEach(function (doc) {\r\n                contextMenuListener(doc, contextMenu);\r\n            });\r\n        }\r\n    }\r\n}\r\nfunction contextMenuListener(el, contextMenu) {\r\n    el.addEventListener('contextmenu', function (e) {\r\n        var _a;\r\n        e.preventDefault();\r\n        contextMenu.style.display = 'block';\r\n        contextMenu.style.top = e.y.toString();\r\n        contextMenu.style.left = e.x.toString();\r\n        var currentId = (_a = this.getAttribute('data-id')) !== null && _a !== void 0 ? _a : undefined;\r\n        if (currentId) {\r\n            // display id on context menu\r\n            var contextMenuHeader = contextMenu.querySelector('.dropdown-header');\r\n            if (contextMenuHeader)\r\n                contextMenuHeader.innerText = \"File Id = \" + currentId;\r\n            var subFolderbtn = contextMenu.querySelector('button[data-file=\"subfolder\"]');\r\n            var subFilebtn = contextMenu.querySelector('button[data-file=\"subfile\"]');\r\n            var btnEdit = contextMenu.querySelector('button[data-task=\"edit\"]');\r\n            var btnDelete = contextMenu.querySelector('button[data-task=\"delete\"]');\r\n            if (btnEdit && btnDelete) {\r\n                btnEdit.setAttribute('data-id', currentId);\r\n                btnDelete.setAttribute('data-id', currentId);\r\n            }\r\n            if (fileService.isFolder(currentId) &&\r\n                subFilebtn &&\r\n                subFolderbtn) {\r\n                subFilebtn.classList.remove('hidden');\r\n                subFilebtn.setAttribute('data-id', currentId);\r\n                subFolderbtn.classList.remove('hidden');\r\n                subFolderbtn.setAttribute('data-id', currentId);\r\n            }\r\n        }\r\n        else {\r\n            console.error('Không tìm thấy id của đối tượng');\r\n            return;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nvar handleCreate = function (newFile, parentId) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var _a, success, errorMessage;\r\n    return __generator(this, function (_b) {\r\n        switch (_b.label) {\r\n            case 0: return [4 /*yield*/, fileService.createNewFile(newFile, parentId)];\r\n            case 1:\r\n                _a = _b.sent(), success = _a.success, errorMessage = _a.errorMessage;\r\n                if (!success || errorMessage)\r\n                    return [2 /*return*/, errorMessage];\r\n                return [2 /*return*/, undefined];\r\n        }\r\n    });\r\n}); };\r\nfunction handleEdit(id, fileName) {\r\n    var _a = fileService.editFileName(id, fileName), success = _a.success, errorMessage = _a.errorMessage;\r\n    if (!success || errorMessage)\r\n        return errorMessage;\r\n    return undefined;\r\n}\r\nfunction handleDelete(id) {\r\n    var _a = fileService.removeItem(id), success = _a.success, errorMessage = _a.errorMessage;\r\n    if (!success || errorMessage)\r\n        return errorMessage;\r\n    return undefined;\r\n}\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar _serverData_1 = __importDefault(require(\"../constants/_serverData\"));\r\nvar _LocalData_1 = __importDefault(require(\"../utilities/_LocalData\"));\r\nvar FileService = /** @class */ (function () {\r\n    function FileService() {\r\n        var _this = this;\r\n        this.data = [];\r\n        this.getData = function () {\r\n            var jsonData = _LocalData_1.default.get('items');\r\n            if (jsonData.length === 0) {\r\n                jsonData = _this.getDataFromServer();\r\n            }\r\n            // merge data to file type\r\n            jsonData.forEach(function (obj) {\r\n                if (!obj !== undefined && (obj === null || obj === void 0 ? void 0 : obj.type)) {\r\n                    if (obj.type === 'file')\r\n                        _this.data.push(obj);\r\n                    else if (obj.type === 'folder')\r\n                        _this.data.push(obj);\r\n                }\r\n            });\r\n        };\r\n        this.getDataFromServer = function () {\r\n            // save to local\r\n            _LocalData_1.default.save('items', _serverData_1.default);\r\n            return _serverData_1.default;\r\n        };\r\n        this.createNewFile = function (newFile, parentId) {\r\n            return new Promise(function (resolve, reject) {\r\n                // check duplicate file name\r\n                if (_this.hasAlreadyExisted(newFile.name, parentId)) {\r\n                    reject({\r\n                        success: false,\r\n                        errorMessage: 'File đã tồn tại',\r\n                    });\r\n                }\r\n                try {\r\n                    var fileToAdd = {\r\n                        id: Date.now().toString(),\r\n                        name: newFile.name,\r\n                        type: newFile.type,\r\n                        createdAt: new Date(),\r\n                        createdBy: 'Khoa',\r\n                        modifiedAt: new Date(),\r\n                        modifiedBy: 'Khoa',\r\n                    };\r\n                    switch (newFile.type) {\r\n                        case 'file':\r\n                            _this.data.push(__assign(__assign({}, fileToAdd), { extension: newFile.extension }));\r\n                            break;\r\n                        case 'folder':\r\n                            _this.data.push(__assign(__assign({}, fileToAdd), { subFiles: [] }));\r\n                            break;\r\n                        default:\r\n                            reject({ success: false, errorMessgae: 'Failed' });\r\n                            break;\r\n                    }\r\n                    // save new data to localStorage\r\n                    _LocalData_1.default.save('items', _this.data);\r\n                }\r\n                catch (err) {\r\n                    reject({ success: false, errorMessgae: err });\r\n                }\r\n                resolve({ success: true });\r\n            });\r\n        };\r\n        this.hasAlreadyExisted = function (fileName, parentId) {\r\n            // check subfile\r\n            if (parentId) {\r\n                var doc = _this.data.find(function (x) { return x.id == parentId && x.type === 'folder'; });\r\n                if (doc) {\r\n                    var folder = doc;\r\n                    if (folder.subFiles &&\r\n                        folder.subFiles.find(function (x) { return x.name === fileName; })) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            // check file\r\n            if (_this.data.find(function (x) { return x.name === fileName; })) {\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n    }\r\n    FileService.prototype.getDoc = function (id) {\r\n        var doc = this.data.find(function (x) { return x.id == id; });\r\n        if (doc)\r\n            return { success: true, data: doc };\r\n        return { success: false };\r\n    };\r\n    FileService.prototype.editFileName = function (id, name) {\r\n        this.data = this.data.map(function (item) {\r\n            if (item.id === id) {\r\n                return __assign(__assign({}, item), { name: name });\r\n            }\r\n            return item;\r\n        });\r\n        // TODO: file vs folder?\r\n        // TODO: output error if any\r\n        // save new data to localStorage\r\n        _LocalData_1.default.save('items', this.data);\r\n        return { success: true };\r\n    };\r\n    FileService.prototype.removeItem = function (id) {\r\n        this.data = this.data.filter(function (x) { return x.id !== id; });\r\n        // TODO: check errors if any\r\n        // save new data to localStorage\r\n        _LocalData_1.default.save('items', this.data);\r\n        return { success: true };\r\n    };\r\n    FileService.prototype.Data = function () {\r\n        return this.data;\r\n    };\r\n    FileService.prototype.isFolder = function (id) {\r\n        var item = this.data.find(function (x) { return x.id === id; });\r\n        if (item && item.type === 'folder')\r\n            return true;\r\n        return false;\r\n    };\r\n    return FileService;\r\n}());\r\nexports.default = FileService;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction get(name) {\r\n    var data = localStorage.getItem(name);\r\n    if (!data)\r\n        return [];\r\n    return JSON.parse(data);\r\n}\r\nfunction save(name, data) {\r\n    try {\r\n        localStorage.setItem(name, JSON.stringify(data));\r\n    }\r\n    catch (err) {\r\n        console.log(err);\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexports.default = { get: get, save: save };\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ready = function (fn) {\r\n    if (document.readyState !== 'loading') {\r\n        fn();\r\n    }\r\n    else {\r\n        document.addEventListener('DOMContentLoaded', fn);\r\n    }\r\n};\r\nexports.default = ready;\r\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}